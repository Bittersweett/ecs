# 切换操作系统<a name="ZH-CN_TOPIC_0031523135"></a>

## 操作场景<a name="section44633721195915"></a>

如果弹性云服务器当前使用的操作系统不能满足业务需求（如软件要求的操作系统版本较高），可以使用切换弹性云服务器的操作系统功能。

公有云平台支持不同镜像类型（包括公共镜像、私有镜像、共享镜像以及市场镜像）与不同操作系统（包括Windows和Windows、Linux和Linux以及Windows和Linux）之间的互相切换。

## 切换须知<a name="section34193483165818"></a>

-   切换操作系统后，弹性云服务器将不再保留原操作系统，并删除原有系统盘。
-   “按需付费”方式购买的弹性云服务器切换操作系统后，由于所选镜像不同，系统盘的容量可能会增大，由此将带来费用的变更，具体收费请参见[产品价格详情](http://support.huaweicloud.com/pro_price/index.html)。
-   “包年/包月”方式购买的弹性云服务器切换操作系统时，由于所选镜像不同，当前云服务器的系统盘容量可能不足，不支持切换后的镜像使用。此时，需先卸载系统盘并进行扩容，然后再重新切换操作系统。
-   “包年/包月”方式购买的弹性云服务器切换操作系统时，由于费用原因，不支持使用市场镜像。

## 约束与限制<a name="section21723173114530"></a>

-   云硬盘的配额需大于0。
-   使用市场镜像创建的“包年/包月”弹性云服务器不支持切换操作系统。
-   对于“包年/包月”方式购买的弹性云服务器，仅支持由免费的操作系统切换至免费的操作系统。
-   H2型弹性云服务器不支持操作系统的切换功能。

## 前提条件<a name="section10065433195938"></a>

-   待切换操作系统的弹性云服务器处于“关机”状态、“切换失败”或“重装失败”状态。
-   待切换操作系统的弹性云服务器挂载有系统盘。
-   切换操作系统会清除系统盘数据，包括系统盘上的系统分区和所有其它分区，请做好数据备份。

## 操作步骤<a name="section208284422018"></a>

1.  登录管理控制台。
2.  <a name="zh-cn_topic_0031523135_zh-cn_topic_0024911405_li45082966143628"></a>选择“计算 \> 弹性云服务器”。
3.  在待切换操作系统的弹性云服务器的“操作”列下，单击“更多 \> 切换操作系统”。

    系统进入“切换操作系统”界面。

4.  根据需求选择需要更换的弹性云服务器规格，包括“镜像类型”和“镜像”。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >对于“包年/包月”方式购买的弹性云服务器，如果系统盘容量小于您选择的待切换镜像的大小，此时，您需要先卸载系统盘，并进行扩容，然后再挂载至原弹性云服务器执行切换操作。  
    >扩容系统盘的操作指导，请参见《云硬盘用户指南》的“管理 \> 扩容云硬盘 \> 离线扩容云硬盘”章节。  

5.  设置登录方式。

    如果待切换操作系统的弹性云服务器是使用密钥登录方式创建的，此时可以更换使用新密钥。

6.  用户数据注入。
    -   勾选“用户数据注入”，且在文本框中填写注入的数据，表示更新弹性云服务器注入的用户数据。
    -   勾选“用户数据注入”，但未在文本框中输入任何数据，表示清空弹性云服务器注入的用户数据。
    -   不勾选“用户数据注入”，表示不更新弹性云服务器注入的用户数据。

        >![](public_sys-resources/icon-note.gif) **说明：**   
        >如果您选择切换后的弹性云服务器为Linux操作系统，且使用密码方式登录，此时，不支持用户数据注入功能。  


7.  单击“确定”。
8.  <a name="zh-cn_topic_0031523135_zh-cn_topic_0024911405_li45992498111556"></a>在“切换云服务器操作系统”页面，确认切换的操作系统规格无误后，阅读并勾选“我已经阅读并同意《华为弹性云服务器服务协议》”，单击“提交申请”。

    提交切换操作系统的申请后，弹性云服务器的状态变为“切换中”，当该状态消失后，表示切换结束。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >切换操作系统过程中，会创建一台临时弹性云服务器，切换操作系统结束后会自动删除。  


## 后续处理<a name="section6296573110114"></a>

如果操作系统切换失败，公有云平台支持重试功能，用户可重新执行[2](#zh-cn_topic_0031523135_zh-cn_topic_0024911405_li45082966143628)-[8](#zh-cn_topic_0031523135_zh-cn_topic_0024911405_li45992498111556)，切换弹性云服务器的操作系统。

重试后，如果仍未成功，可直接联系客服，客服会在后台进行人工恢复。

